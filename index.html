<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Shadow如寒灬的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Shadow如寒灬的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Shadow如寒灬的个人博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shadow如寒灬的个人博客">
  
    <link rel="alternate" href="/atom.xml" title="Shadow如寒灬的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.webp">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlight.css">
</head>
</html>
<body>
  <div id="fullpage" class="mobile-nav-left">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-left">
      
        <a class="nav-item" href="/" title>首页</a>
      
        <a class="nav-item" href="/archives" title>归档</a>
      
        <a class="nav-item" href="/nodejs/wechat/ranking-list" title>游戏高分榜</a>
      
        <a class="nav-item" href="/phpmyadmin" title>数据库</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main">
  
    <article id="post-2019-04-17-ssh相关命令" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/17/2019-04-17-ssh相关命令/">ssh相关命令</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/17/2019-04-17-ssh相关命令/" class="article-date">
  <time datetime="2019-04-16T16:00:00.000Z" itemprop="datePublished">2019-04-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/自动化/">自动化</a>►<a class="article-category-link" href="/categories/自动化/shell/">shell</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></div>
<p> 会在<code>~/.ssh</code>目录中新增两个文件<code>id_rsa.pub</code>、<code>id_rsa</code></p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub root@www.wanyan.site</span><br></pre></td></tr></table></figure></div>
<p>这条命令会在<code>www.wanyan.site</code>的<code>root</code>用户下的<code>~/.ssh/authorized_keys</code>中添加本地机器的<code>~/.ssh/id_rsa.pub</code>  </p>
<p>之后若  </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh@www.wanyan.site</span><br></pre></td></tr></table></figure></div>
<p>便可以不需要输入密码了</p>
<blockquote>
<p>PTY allocation request failed on channel 0<br>Hi there, <strong>You’ve successfully authenticated, but Gogs does not provide shell access.</strong><br>If this is unexpected, please log in with password and setup Gogs under another user.<br>Connection to <a href="http://www.wanyan.site" target="_blank" rel="noopener">www.wanyan.site</a> closed.</p>
</blockquote>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no root@wanyan.site</span><br></pre></td></tr></table></figure></div>
      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-04-16-livereload插件时未导入cordova.js文件错误的解决方式" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/16/2019-04-16-livereload插件时未导入cordova.js文件错误的解决方式/">livereload插件时未导入cordova .js文件错误的解决方式</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/16/2019-04-16-livereload插件时未导入cordova.js文件错误的解决方式/" class="article-date">
  <time datetime="2019-04-15T16:00:00.000Z" itemprop="datePublished">2019-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/bug记录/">bug记录</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bug记录/">bug记录</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/">hybrid</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p>找到：<br><code>node_modules/@ionic/app-scripts/dist/dev-server/serve-config.js</code><br>将<br><code>exports.ANDROID_PLATFORM_PATH = path.join(&#39;platforms&#39;, &#39;android&#39;, &#39;assets&#39;, &#39;www&#39;);</code><br>替换为：<br><code>exports.ANDROID_PLATFORM_PATH = path.join(&#39;platforms&#39;, &#39;android&#39;, &#39;app&#39;, &#39;src&#39;, &#39;main&#39;, &#39;assets&#39;, &#39;www&#39;);</code></p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-04-16-将下载的乱码txt文件转换为utf-8格式" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/16/2019-04-16-将下载的乱码txt文件转换为utf-8格式/">将下载的乱码txt文件转换为utf-8格式</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/16/2019-04-16-将下载的乱码txt文件转换为utf-8格式/" class="article-date">
  <time datetime="2019-04-15T16:00:00.000Z" itemprop="datePublished">2019-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/其他/">其他</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vim/">vim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技巧/">技巧</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//打开xxx.txt文件  </span><br><span class="line">$ vim ~/Download/xxx.txt</span><br><span class="line">//显示当前文件编码</span><br><span class="line">: set fenc</span><br><span class="line">//以cp936的方式显示当前文件</span><br><span class="line">: edit ++enc=cp936</span><br><span class="line">//设置当前使用的文件保存格式为utf-8(暂未保存)</span><br><span class="line">: set fenc=utf-8</span><br><span class="line">//保存</span><br><span class="line">: w</span><br></pre></td></tr></table></figure></div>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-04-16-JavaScript 将数组拆分为不定参数列表" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/16/2019-04-16-JavaScript 将数组拆分为不定参数列表/">javascript 将数组拆分为不定参数列表</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/16/2019-04-16-JavaScript 将数组拆分为不定参数列表/" class="article-date">
  <time datetime="2019-04-15T16:00:00.000Z" itemprop="datePublished">2019-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/技巧/">技巧</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技巧/">技巧</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function a(...p)&#123;</span><br><span class="line">    console.log(p)</span><br><span class="line">&#125;;</span><br><span class="line">let b = [1,2,3,4,5];</span><br><span class="line">a(b);//[[1, 2, 3, 4, 5]]</span><br><span class="line">a.apply(null,b);//[1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure></div>
<p>应用场景</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function forkJoinExample()&#123;</span><br><span class="line">    let n = 5;</span><br><span class="line">    let obvArr = [];</span><br><span class="line">    for(let i = 1; i &lt; n; i ++)&#123;</span><br><span class="line">        obvArr.push(getObv(index));</span><br><span class="line">    &#125;</span><br><span class="line">    return Observable.forkJoin.apply(null,obvArr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getObv(index):Observable&lt;any&gt;&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-04-16-252个英语字根、词根" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/16/2019-04-16-252个英语字根、词根/">252个英语字根、词根</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/16/2019-04-16-252个英语字根、词根/" class="article-date">
  <time datetime="2019-04-15T16:00:00.000Z" itemprop="datePublished">2019-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/其他/">其他</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/其他/">其他</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h4 id="第一部分，字根"><a href="#第一部分，字根" class="headerlink" title="第一部分，字根"></a>第一部分，字根</h4><ul>
<li>1,ag=do,act 做，动　</li>
<li>2,agri=field 田地，农田(agri也做agro,agr)　</li>
<li>3,ann=year年　</li>
<li>4,audi=hear听　</li>
<li>5,bell=war战争　</li>
<li>6,brev=short短　</li>
<li>7,ced,ceed,cess=go行走　</li>
<li>8,cept=take拿取　</li>
<li>9,cid,cis=cut,kill切，杀　</li>
<li>10,circ=ring环，圈　</li>
<li>11,claim,clam=cry,shout喊叫　</li>
<li>12,clar=clear清楚，明白　</li>
<li>13,clud=close,shut关闭　</li>
<li>14,cogn=known知道　</li>
<li>15,cord=heart心　</li>
<li>16,corpor=body体　</li>
<li>17,cred=believe,trust相信，信任　</li>
<li>18,cruc=cross 十字　</li>
<li>19,cur=care关心　</li>
<li>20,cur,curs,cour,cours=run跑　</li>
<li>21,dent=tooth牙齿　</li>
<li>22,di=day 日　</li>
<li>23,dict=say说　</li>
<li>24,dit=give给　</li>
<li>25,don=give给　</li>
<li>26,du=two二　</li>
<li>27,duc,duct=lead引导　</li>
<li>28,ed=eat吃　</li>
<li>29,equ=equal等，均，平　</li>
<li>30,ev=age年龄，寿命，时代，时期　</li>
<li>31,fact=do,make做，作　</li>
<li>32,fer=bring,carry带拿　</li>
<li>33,flor=flower花　</li>
<li>34,flu=flow流　</li>
<li>35,fus=pour灌，流，倾泄　</li>
<li>36,grad=step,go,grade步，走，级　</li>
<li>37,gram=write,draw写，画，文字，图形　</li>
<li>38,graph=write,records写，画，记录器，图像</li>
<li>39,gress=go,walk 行走　</li>
<li>40,habit=dwell居住　</li>
<li>41,hibit=hold拿，持　</li>
<li>42,hospit=guest客人　</li>
<li>43,idio=peculiar,own,private,proper特殊的，个人的，专有的　</li>
<li>44,insul=island岛　</li>
<li>45,it=go行走　</li>
<li>46,ject=throw投掷　</li>
<li>47,juven=young年轻，年少　</li>
<li>48,lect=choose,gather选，收　</li>
<li>49,lev=raise举，升　</li>
<li>50,liber=free自由　</li>
<li>51,lingu=language语言　</li>
<li>52,liter=letter文字，字母　</li>
<li>53,loc=place地方　</li>
<li>54,log=speak言，说　</li>
<li>55,loqu=speak言，说　</li>
<li>56,lun=moon月亮　</li>
<li>57,man=dwell,stay居住，停留　</li>
<li>58,manu=hand手　</li>
<li>59,mar=sea海　</li>
<li>60,medi=middle中间　</li>
<li>61,memor=memory记忆　</li>
<li>62,merg=dip,sink 沉，没　</li>
<li>63,migr=remove,move迁移　</li>
<li>64,milit=soldier兵　</li>
<li>65,mini=small,little小　</li>
<li>66,mir=wonder惊奇　</li>
<li>67,miss=send 投，送，发(miss也作mit)　</li>
<li>68,mob=move动　</li>
<li>69,mort=death死　</li>
<li>70,mot=move移动，动　</li>
<li>71,nomin=name名　</li>
<li>72,nov=new新　</li>
<li>73,numer=number 数　</li>
<li>74,onym=name 名　</li>
<li>75,oper=work工作　</li>
<li>76,ori=rise升起</li>
<li>77,paci=peace和平，平静　</li>
<li>78,pel=push,drive推，逐，驱　</li>
<li>79,pend ,pens=hang悬挂/weigh称量/pay支出，付钱，花费　</li>
<li>80,pet=seek追求　</li>
<li>81,phon=sound声音　</li>
<li>82,pict=paint画，描绘　</li>
<li>83,plen=full满，全　</li>
<li>84,plic=fold折，重叠　</li>
<li>85,pon=put放置　</li>
<li>86,popul=people人民　</li>
<li>87,port=carry拿，带，运　</li>
<li>88,pos=put放置　</li>
<li>89,preci=price价值　</li>
<li>90,punct=point,prick点，刺　</li>
<li>91,pur=pure清，纯，净　</li>
<li>92,rect=right,straight正，直　</li>
<li>93,rupt=break破　</li>
<li>94,sal=salt盐　</li>
<li>95,scend,scens=climb爬，攀　</li>
<li>96,sci=know知　</li>
<li>97,sec,sequ=follow跟随　</li>
<li>98,sect=cut切割　</li>
<li>99,sent,sens=feel感觉　</li>
<li>100,sid=sit坐　</li>
<li>101,sist=stand站立　</li>
<li>102,son=sound声音</li>
<li>103,spect=look看　</li>
<li>104,spir=breathe呼吸　</li>
<li>105,tail=cut切割　</li>
<li>106,tain,ten,tin=hold握，持，守　</li>
<li>107,tect=cover掩盖　</li>
<li>108,tele=far远　</li>
<li>109,tempor=time时　</li>
<li>110,tend(tens,tent)=stretch伸　</li>
<li>111,terr=land,earth土地，陆地　</li>
<li>112,text=weave纺织　</li>
<li>113,tract=draw拉，抽，引　</li>
<li>114,un=one一　</li>
<li>115,urb=city城市　</li>
<li>116,vac,vacu=empty空　</li>
<li>117,vad,vas=walk,go行走　</li>
<li>118,vari=change变化　</li>
<li>119,ven=come来　</li>
<li>120,vert,vers=turn转　</li>
<li>121,vi,via=way道路　</li>
<li>122,vis,vid=see看　</li>
<li>123,vit=life生命　</li>
<li>124,viv=live活　</li>
</ul>
<h4 id="第二部分，词根"><a href="#第二部分，词根" class="headerlink" title="第二部分，词根"></a>第二部分，词根</h4><ul>
<li>125,aer(o)空气，空中，航空　</li>
<li>126,alt高　</li>
<li>127,am爱　</li>
<li>128,ambul行走　</li>
<li>129,anim生命，活，心神，意见　</li>
<li>130,anthrop(o)人，人类　</li>
<li>131,aqu水　</li>
<li>132,arch统治者，首脑archy 统治　</li>
<li>133,avi鸟　</li>
<li>134,bat打　</li>
<li>135,biblio书　</li>
<li>136,birg战斗，打　</li>
<li>137,cad,cas降落，降临　</li>
<li>138,cert 确定，确信　</li>
<li>139,chron时　</li>
<li>140,cid降落，降临　</li>
<li>141,clin倾　</li>
<li>142,co**(o)世界，宇宙　</li>
<li>143,cracy统治crat支持</li>
<li>144,cub躺，卧　</li>
<li>145,cult耕，培养　</li>
<li>146,cycl(o)圈，环，轮　</li>
<li>147,dem(o)人民　</li>
<li>148,dexter右　</li>
<li>149,doc教　</li>
<li>150,dom屋，家　</li>
<li>151,dorm睡眠　</li>
<li>152,drom跑　</li>
<li>153,ego我　</li>
<li>154,err漫游，走，行　</li>
<li>155,fabl,fabul 言　</li>
<li>156,feder联盟　</li>
<li>157,ferv沸，热　</li>
<li>158,fict,fig塑造，虚构　</li>
<li>159,fid信任　</li>
<li>160,fil线　</li>
<li>161,flat 吹　</li>
<li>162,flect,flex弯曲　</li>
<li>163,flict打击　</li>
<li>164,frag,fract破，折　</li>
<li>165,frig冷　</li>
<li>166,fug逃，散　</li>
<li>167,fund,found底，基础　</li>
<li>168,gam婚姻　</li>
<li>169,gram谷物，谷粒　</li>
<li>170,grav重　</li>
<li>171,greg群，集合　</li>
<li>172,gyn,gynce(o)妇女　</li>
<li>173,hal呼吸　</li>
<li>174,helic(o)螺旋　</li>
<li>175,hes,her粘着　</li>
<li>176,ign火　</li>
<li>177,integr整，全　</li>
<li>178,junct连接，连结　</li>
<li>179,later边　</li>
<li>180,leg读</li>
<li>181,leg,legis法　</li>
<li>182,luc光　</li>
<li>183,lumin光　</li>
<li>184,magn(i)大</li>
<li>185,matr(i)，metro母　</li>
<li>186,mega大　</li>
<li>187,mens测量　</li>
<li>188,ment心，神，智，思，意　</li>
<li>189,min伸出，突出　</li>
<li>190,misc混合，混杂　</li>
<li>191,mis(o)恨，厌恶　</li>
<li>192,mon告诫，提醒　</li>
<li>193,mon单独，一个　</li>
<li>194,mur墙　</li>
<li>195,mut变换　</li>
<li>196,nat诞生　</li>
<li>197,nav船　</li>
<li>198,nect,nex结，系　</li>
<li>199,negr,nigr黑　</li>
<li>200,nihil无　</li>
<li>201,noc,nox伤害　</li>
<li>202,noct(i)夜　</li>
<li>203,norm规范，正规，正常　</li>
<li>204,nutri营养　</li>
<li>205,orn装饰　</li>
<li>206,par生，产　</li>
<li>207,parl说，谈　</li>
<li>208,past喂，食　</li>
<li>209,path(o)，pathy疾病，疗法　</li>
<li>210,patr(i)父，祖　</li>
<li>211,ped脚，足　</li>
<li>212,ped儿童，小孩　</li>
<li>213,petr(o)石　</li>
<li>214,phag吃　</li>
<li>215,phil(o)爱　</li>
<li>216,phob(ia)怕　</li>
<li>217,plex重叠，重　</li>
<li>218,polis城市　</li>
<li>219,prim第一，最初　</li>
<li>220,radic根　</li>
<li>221,ras,rad擦，刮　</li>
<li>222,rid,ris笑　</li>
<li>223,rod,ros咬，啮　</li>
<li>224,rot轮，转　</li>
<li>225,rud原始，粗野　</li>
<li>226,rur,rus农村　</li>
<li>227,sat,satis,satur足，满，饱　</li>
<li>228,sen老　</li>
<li>229,simil,simul相似，相同　</li>
<li>230,solo单独　</li>
<li>231,sol太阳　</li>
<li>232,soph智慧　</li>
<li>233,sper希望　</li>
<li>234,spe,spars散，撒</li>
<li>235,splend发光，照耀　</li>
<li>236,stell星　</li>
<li>237,tact,tag触　</li>
<li>238,the(o)神　</li>
<li>239,ton音　</li>
<li>240,tort扭　</li>
<li>241,tour迂回，转　</li>
<li>242,trud,trus推，冲　</li>
<li>243,tut,tuit监护，看管　</li>
<li>244,umbr阴影　</li>
<li>245,ut,us用　</li>
<li>246,vas走，漫游　</li>
<li>247,val强　</li>
<li>248,van空，无　</li>
<li>249,ver(i)真实　</li>
<li>250,voc,vok声音，叫喊　</li>
<li>251,vol,volunt意志，意愿　</li>
<li>252,volu,volv滚，转</li>
</ul>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-04-16-22-Ionic3开发测试配置方式" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/16/2019-04-16-22-Ionic3开发测试配置方式/">Ionic3开发测试配置方式</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/04/16/2019-04-16-22-Ionic3开发测试配置方式/" class="article-date">
  <time datetime="2019-04-15T16:00:00.000Z" itemprop="datePublished">2019-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/">Hybrid</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/Ionic/">Ionic</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/">hybrid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h1><p>解决ionic开发程序的如下问题：  </p>
<ol>
<li>测试数据重复录入。（例如身份证号码、电话号码录入）  </li>
<li>数据库中数据不全，需要对测试数据特别处理。  </li>
<li>使用web版本的程序测试带有手机原生功能的版本。（例如图片上传）  </li>
<li>网络不通畅，或无法访问，却由于验证机制导致程序无法正常继续测试。  </li>
<li>开发环境、测试环境、生产环境频繁切换  </li>
</ol>
<h1 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h1><p>定义多种配置方式：<br>custom-config.ts</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Injectable()</span><br><span class="line">export class CustomConfig &#123;</span><br><span class="line">    debug:boolean = false;//默认为非调试模式</span><br><span class="line">    isNative:boolean = false;//默认为非原生应用模式</span><br><span class="line">    isWechat:boolean = false;//默认为非微信版本</span><br><span class="line">    host:string = &quot;&quot;;//默认的host路径为相对的服务器路径</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">//通过继承的方式来修改其默认值</span><br><span class="line">export class ReleaseConfigClass extends CustomConfig &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.debug = false;</span><br><span class="line">        this.isNative = true;</span><br><span class="line">        //app版本需要使用完整服务器路径</span><br><span class="line">        this.host = &quot;https://www.a.com/&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export class DebugConfigClass extends CustomConfig &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super();</span><br><span class="line">    this.debug = true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const ReleaseConfig: CustomConfig = new ReleaseConfigClass();</span><br></pre></td></tr></table></figure></div>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const DebugConfig: CustomConfig = new DebugConfigClass();</span><br></pre></td></tr></table></figure></div>
<p>app.modules.ts</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@NgModule(&#123;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">provider:[</span><br><span class="line">    //通过简单修改、或者gulp自动修改userValue的值达到不同环境不同配置的需求</span><br><span class="line">    &#123;provide: CustomConfig, useValue: DebugConfig&#125;</span><br><span class="line">]</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>之后可以在对应的page中通过注入CustomConfig来获取其对应的配置项了。</p>
<p>login.ts</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export class LoginPage extends BasePage &#123;</span><br><span class="line">        loginInfo:&#123;userName?:string,password?:string&#125;=&#123;&#125;;</span><br><span class="line">        constructor(private config:CustomConfig)&#123;</span><br><span class="line">                //若是调试模式则给其赋值默认值、避免重复多次输入</span><br><span class="line">                if(config.debug)&#123;</span><br><span class="line">                    this.loginInfo.userName=&quot;administrator&quot;;</span><br><span class="line">                    this.loginInfo.password=&quot;1!@#addf12121&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h1 id="加强版"><a href="#加强版" class="headerlink" title="加强版"></a>加强版</h1><p>测试环境更多变，为了应付测试环境多变的需求，针对测试版本的程序，还能提供一个Component或者Page用来编辑当前的config的属性，以达到一处输入多处使用，避免了重复输入特别麻烦的数据，比如身份证，电话号码邮编等等、而且还能够比较快速的针对不同的用户信息进行测试。</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-1-15-express源码解读" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/15/2019-1-15-express源码解读/">express源码剖析</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/01/15/2019-1-15-express源码解读/" class="article-date">
  <time datetime="2019-01-14T16:00:00.000Z" itemprop="datePublished">2019-01-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web后端/">Web后端</a>►<a class="article-category-link" href="/categories/Web后端/Nodejs/">Nodejs</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原理理解/">原理理解</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码剖析/">源码剖析</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p>app实质只是一个带有三个参数的<strong>方法</strong>  </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function createApplication() &#123;</span><br><span class="line"></span><br><span class="line">  //app实质是一个带有三个参数的方法</span><br><span class="line">  var app = function(req, res, next) &#123;</span><br><span class="line">    app.handle(req, res, next);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  mixin(app, EventEmitter.prototype, false);</span><br><span class="line">  mixin(app, proto, false);</span><br><span class="line"></span><br><span class="line">  // expose the prototype that will get set on requests</span><br><span class="line">  app.request = Object.create(req, &#123;</span><br><span class="line">    app: &#123; configurable: true, enumerable: true, writable: true, value: app &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // expose the prototype that will get set on responses</span><br><span class="line">  app.response = Object.create(res, &#123;</span><br><span class="line">    app: &#123; configurable: true, enumerable: true, writable: true, value: app &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  app.init();</span><br><span class="line">  return app;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>app混合了EventEmitter的原型及Application的原型</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mixin(app, EventEmitter.prototype, false);</span><br><span class="line"> mixin(app, proto, false);</span><br></pre></td></tr></table></figure></div>
<p>将request、response的原型暴露出来<br><div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request</span><br></pre></td></tr></table></figure></div></p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-2019-1-11-Ionic手势去抖动" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/11/2019-1-11-Ionic手势去抖动/">Ionic手势去抖动</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/01/11/2019-1-11-Ionic手势去抖动/" class="article-date">
  <time datetime="2019-01-10T16:00:00.000Z" itemprop="datePublished">2019-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/">Hybrid</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/Ionic/">Ionic</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/">hybrid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原理理解/">原理理解</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码剖析/">源码剖析</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="Ionic手势去抖动"><a href="#Ionic手势去抖动" class="headerlink" title="Ionic手势去抖动"></a>Ionic手势去抖动</h1><h2 id="为什么需要去抖动"><a href="#为什么需要去抖动" class="headerlink" title="为什么需要去抖动"></a>为什么需要去抖动</h2><p>某些浏览器，在执行<code>touchmove</code>、<code>mousemove</code>等手势类回调的时候可能一秒钟之内会被连续触发超过60次，甚至到到120次（实测Chrome不会超过60次、Safari能达到120次），我们知道60次已经完全满足了流畅度的要求，如果强制在1s的时间内执行120次页面重绘完全没有必要，反而容易导致卡顿，因此我们需要选择性的只执行其中的一部分回调，从而让页面重绘在1s中之内最多只执行60次。</p>
<h2 id="如何实现"><a href="#如何实现" class="headerlink" title="如何实现"></a>如何实现</h2><p>js的<code>requestAnimationFrame</code>会在1s中之内固定执行大概60次、我们可以利用它来筛选<code>touchmove</code>、<code>mousemove</code>等回调<br>当触发一次<code>touchmove</code>、<code>mousemove</code>的时候，调用一次<code>requestAnimationFrame</code>,并锁定，此时再调用<code>requestAnimationFrame</code>是无效的，当<code>requestAnimationFrame</code>的回调被执行的时候，再给解锁、此时能继续调用<code>requestAnimationFrame</code>，因此在锁定期间视图调用<code>requestAnimationFrame</code>的方法都被舍弃了，不会被执行，因此达到了过滤掉多余的<code>touchmove</code>、<code>mousemove</code>等回调的目的，而且在1s中的时间内回调的次数不会超过<code>requestAnimationFrame</code>回调的次数</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">let locked=false;</span><br><span class="line">function debounce(fn)&#123;</span><br><span class="line">	if(!locked)&#123;</span><br><span class="line">		locked = true;					//调用requestAnimationFrame时将其锁定</span><br><span class="line">										//锁定期间无法再次调用</span><br><span class="line">		requestAnimationFrame(()=&gt;&#123;</span><br><span class="line">			locked = false;				//requestAnimationFrame回调的时候解锁</span><br><span class="line">			fn &amp;&amp; fn();</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let outCallBackNum = 0;</span><br><span class="line">let inCallBackNum=0;</span><br><span class="line">let times=120;							//1s执行次数</span><br><span class="line">for(let i=0;i&lt;times;i++)&#123;</span><br><span class="line">	setTimeout(()=&gt;&#123;</span><br><span class="line">		outCallBackNum ++ ;</span><br><span class="line">		console.log(&quot;out&quot;+outCallBackNum);</span><br><span class="line">		debounce(()=&gt;&#123;</span><br><span class="line">			inCallBackNum ++;</span><br><span class="line">			console.log(&quot;in&quot;+inCallBackNum);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;,1000/times*i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//=&gt;out1</span><br><span class="line">//=&gt;in1</span><br><span class="line">//=&gt;out2</span><br><span class="line">//=&gt;in2</span><br><span class="line">//=&gt;out3</span><br><span class="line">//=&gt;out4</span><br><span class="line">//=&gt;in3</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">//=&gt;out118</span><br><span class="line">//=&gt;in60</span><br><span class="line">//=&gt;out119</span><br><span class="line">//=&gt;out120</span><br><span class="line">//=&gt;in61</span><br></pre></td></tr></table></figure></div>
<p>由上方的测试代码可以看到，在debounce包装内的回调被执行了61次、包装外部却被执行了120次，也可以将times的大小  </p>
<ul>
<li>若time超过60次依旧可以看到in依旧在60次左右</li>
<li>若time不超过60次时、in与out的执行次数基本相同</li>
</ul>
<h2 id="Ionic实现方式"><a href="#Ionic实现方式" class="headerlink" title="Ionic实现方式"></a>Ionic实现方式</h2><p>ionic中去抖动是在<code>src/platform/dom-controller.ts</code>文件中实现，其中包含两个类</p>
<ul>
<li><code>DomDebouncer</code><br>  充当锁的作用，每个<code>DomDebouncer</code>就是一把锁，当其锁定时，该<code>DomDebouncer</code>无法再继续往<code>DomController</code>中对应的方法，也因此不会被执行，从而舍弃</li>
<li><code>DomController</code><br>  统一调度<code>requestAnimationFrame</code>，在每次的<code>requestAnimationFrame</code>的回调被执行时、调用其队列中维护着的方法列表，并依次执行    </li>
</ul>
<p>使用方式：  </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.debouncer = opts.domController.debouncer();</span><br><span class="line">this.debouncer.write(() =&gt; &#123;</span><br><span class="line">	//do something here in debouncer zone</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>
<p>其具体的执行过程可以参考下图</p>
<p><img src="./debounce原理.png" alt></p>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>去抖动不仅仅可以运用在手势事件上，也不仅仅是运用<code>requestAnimationFram</code>实现，还可以利用<code>setTimeout()</code> 、<code>setInterval</code>等方法来实现，运用在用户点击某个按钮，或者用户输入文字等等更多的情况下，</p>
<p>例如：禁止在300ms内重复点击按钮    </p>
<p>例如：直接根据用户正在输入的文字调用接口回太快，导致性能受到影响，需要在禁止用户在200ms内重复调用接口  </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;button id=&quot;btn&quot; style=&quot;width:100px;height:100px;&quot; onclick=&quot;clickMe()&quot;&gt;点我&lt;/button&gt;</span><br><span class="line">    &lt;input id=&quot;ipt&quot; style=&apos;width:100%&apos; name=&apos;myname&apos; onchange=&quot;changed()&quot; oninput=&quot;changing()&quot;&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        class Debounce &#123;</span><br><span class="line"></span><br><span class="line">            constructor() &#123;</span><br><span class="line">                this.locked = false;</span><br><span class="line">            &#125;</span><br><span class="line">            debounce(action, time) &#123;</span><br><span class="line">                if (!this.locked) &#123;</span><br><span class="line">                    this.locked = true;</span><br><span class="line">                    // action &amp;&amp; action();</span><br><span class="line">                    setTimeout(() =&gt; &#123;</span><br><span class="line">                        this.locked = false;</span><br><span class="line">                        action &amp;&amp; action();</span><br><span class="line">                    &#125;, time || 200)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        let debounce = new Debounce();</span><br><span class="line">        function clickMe() &#123;</span><br><span class="line">            console.log(&apos;clicked!&apos;);</span><br><span class="line">            debounce.debounce(() =&gt; &#123;</span><br><span class="line">                console.log(&apos;do something...&apos;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function actionReqeust() &#123;</span><br><span class="line">            console.log(&apos;fire request...&apos;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function changed() &#123;</span><br><span class="line">            actionReqeust();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        function changing() &#123;</span><br><span class="line">            console.log(&apos;changing!&apos;);</span><br><span class="line">            debounce.debounce(() =&gt; &#123;</span><br><span class="line">                actionReqeust();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></div>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-Ionic深入详解/2019-1-4-Ionic 手势事件" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/04/Ionic深入详解/2019-1-4-Ionic 手势事件/">Ionic 手势事件</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/01/04/Ionic深入详解/2019-1-4-Ionic 手势事件/" class="article-date">
  <time datetime="2019-01-03T16:00:00.000Z" itemprop="datePublished">2019-01-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/">Hybrid</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/Ionic/">Ionic</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/">hybrid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原理/">原理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码剖析/">源码剖析</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="Ionic-手势事件"><a href="#Ionic-手势事件" class="headerlink" title="Ionic 手势事件"></a>Ionic 手势事件</h1><p>Ionic 中有三类手势  </p>
<ol>
<li>Gesture  </li>
<li>Swipe   </li>
<li>PanGesture  </li>
</ol>
<h2 id="Gesture"><a href="#Gesture" class="headerlink" title="Gesture"></a>Gesture</h2><p>Ionic中Gesture引入了Gesture但无其对应的实现<br>Gesture底层使用的<a href="http://hammerjs.github.io/" target="_blank" rel="noopener">HammerJs</a></p>
<p><code>Gesture</code>此类需要稍微解释下，因为第三方 Ionic组件<code>ionic-img-viewer</code><a href="https://github.com/Riron/ionic-img-viewer" target="_blank" rel="noopener">Image viewer for Ionic 2+</a>中使用到了它，但是由于<code>Gesture</code>中的一个bug会导致其在放大时上下滑动的操作并不流畅，其中有调用：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.options(&#123; direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL &#125;);</span><br></pre></td></tr></table></figure></div>
<p>但是此方法并不能将手势事件设置为同时支持横向和竖向。<br>需要覆盖其<code>on</code>方法并重写才能真正达到同时支持正向和横向：</p>
<p>ionic中原on方法：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">on(type: string, cb: Function) &#123;</span><br><span class="line">	if (type === &apos;pinch&apos; || type === &apos;rotate&apos;) &#123;</span><br><span class="line">	  this._hammer.get(type).set(&#123;enable: true&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	this._hammer.on(type, cb);</span><br><span class="line">	(this._callbacks[type] || (this._callbacks[type] = [])).push(cb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>在其子类中覆盖掉此方法：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">on(type, cb: Function) &#123;</span><br><span class="line">    let __this: any = this;</span><br><span class="line">    __this._hammer.get(type) &amp;&amp; __this._hammer.get(type).set(__this._options);</span><br><span class="line">    super.on(type, cb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="Swiper"><a href="#Swiper" class="headerlink" title="Swiper"></a>Swiper</h2><p>Ionic中的<code>Slides</code>控件使用的是Swipe的手势<br>Swipe底层使用的是<a href="http://idangero.us/swiper/" target="_blank" rel="noopener">Swiper</a></p>
<h2 id="PanGesture"><a href="#PanGesture" class="headerlink" title="PanGesture"></a>PanGesture</h2><p>Ionic中诸如：</p>
<ol>
<li>滑动返回上一页</li>
<li><code>ion-menu</code>的打开关闭</li>
<li><code>ion-item</code>的左右滑动事件</li>
<li>下拉刷新、上拉加载更多</li>
<li><code>ion-toggle</code>控件</li>
</ol>
<p>都是使用的js原始的手势事件的封装，这篇文章分析的也是<code>PanGesture</code></p>
<h3 id="PanGesture解析"><a href="#PanGesture解析" class="headerlink" title="PanGesture解析"></a>PanGesture解析</h3><ol>
<li><p><code>PanGestureConfig</code>  </p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export interface PanGestureConfig &#123;</span><br><span class="line">  threshold?: number;				//阈值</span><br><span class="line">  maxAngle?: number;				//最大角度</span><br><span class="line">  direction?: &apos;x&apos; | &apos;y&apos;;			//方向</span><br><span class="line">  gesture?: GestureDelegate;		//事件代理</span><br><span class="line">  domController?: DomController;	//用来去抖动</span><br><span class="line">  zone?: boolean;					//是否允许于Angular ngZone</span><br><span class="line">  capture?: boolean;				//是否在js事件捕获阶段</span><br><span class="line">  passive?: boolean;				//</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<pre><code>* `threshold`：在某个方向上的移动距离达到或超过此值才能触发手势开始事件  
* `maxAngle`：若在某个方向上的夹角超过了这个大小，那么就不会触发这个方向的手势事件      
* `direction`：在x（横向）或者y（纵向）方向方向触发手势事件  
* `gesture`：事件代理，每个`PanGesture`都需要维护一个事件代理，其能够决定此手势是否能正确运行，并且在同时同方向存在多个手势事件时能够根据优先级以及一些其他的设置来决定手势是否触发  
* `domController`：是通过取其中`debouncer():DomDebouncer{}`来去抖动，使手指在屏幕上滑动的时间经过平滑后再回调到`onDrag`的事件中  
* `capture`：js事件捕获可以在两个阶段进行拦截，若capture为ture则在捕获阶段拦截，否则在冒泡阶段拦截   

    1. 事件由根节点传递到子节点的过程中（捕获）
    2. 事件在传递到最上层的子节点，然后返回根节点的过程（冒泡） 

* `passive`：
</code></pre><ol>
<li><p><code>GestureDelegate</code></p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">constructor(</span><br><span class="line">    private name: string,				//事件名称</span><br><span class="line">    private id: number,					//事件的id</span><br><span class="line">    private controller: GestureController,  //全局单例的手势管理器	</span><br><span class="line">    private priority: number,			//优先级</span><br><span class="line">    private disableScroll: boolean		//是否需要禁止滚动</span><br><span class="line">  ) &#123; &#125;</span><br></pre></td></tr></table></figure></div>
<p> 其中<code>disableScroll</code> 是通过在<code>ion-app</code>中添加<code>.disable-scroll</code>的方式实现</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.disable-scroll .ion-page &#123;</span><br><span class="line">	pointer-events: none;</span><br><span class="line">	touch-action: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-Ionic深入详解/2018-12-21-Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/Ionic深入详解/2018-12-21-Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式/">Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2018/12/21/Ionic深入详解/2018-12-21-Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式/" class="article-date">
  <time datetime="2018-12-20T16:00:00.000Z" itemprop="datePublished">2018-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/移动前端/">移动前端</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/">Hybrid</a>►<a class="article-category-link" href="/categories/移动前端/Hybrid/Ionic/">Ionic</a>
  </div>

    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/">hybrid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/原理/">原理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/源码剖析/">源码剖析</a></li></ul>

  </div>
  
    <span id="busuanzi_container_page_pv">
        <div></div>
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="Ionic-使用-DeepLink-工具类建立页面组件与url的相互映射的方式"><a href="#Ionic-使用-DeepLink-工具类建立页面组件与url的相互映射的方式" class="headerlink" title="Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式"></a>Ionic 使用 DeepLink 工具类建立页面组件与url的相互映射的方式</h1><h2 id="IonicPage-装饰器"><a href="#IonicPage-装饰器" class="headerlink" title="@IonicPage()装饰器"></a><code>@IonicPage()</code>装饰器</h2><p>ionic编译命令会将<code>@IonicPage()</code>编译为<code>DeepLinkMetaData</code>的列表类型</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@IonicPage(&#123;</span><br><span class="line">    name: &apos;APage&apos;,</span><br><span class="line">    segment: &quot;a/:a-params&quot;,</span><br><span class="line">    defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">&#125;)</span><br><span class="line">@Component(&#123;</span><br><span class="line">    selector: &apos;page-a&apos;,</span><br><span class="line">    templateUrl: &apos;a.html&apos;,</span><br><span class="line">&#125;)</span><br><span class="line">export class APage &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">links:[</span><br><span class="line">  &#123;</span><br><span class="line">    loadChildren: &apos;../pages/a/a.module#APageModule&apos;,</span><br><span class="line">    name: &apos;APage&apos;,</span><br><span class="line">    segment: &apos;a/:a-params&apos;,</span><br><span class="line">    priority: &apos;low&apos;,</span><br><span class="line">    defaultHistory: [</span><br><span class="line">      &apos;BPage&apos;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>
<p>然后将<code>links</code>作为<code>IonicModule.forRoot()</code>的第三个参数传入，通过Angular的机制将其绑定到<code>DeepLinkConfigToken</code>的<code>InjectionToken</code>中然后作为<code>UrlSerializer</code>的工厂方法的参数用来构建一个<code>UrlSerializer</code></p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123; provide: DeepLinkConfigToken, useValue: deepLinkConfig &#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&#123; provide: UrlSerializer, useFactory: setupUrlSerializer, deps: [ App, DeepLinkConfigToken ] &#125;,</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">export function setupUrlSerializer(app: App, userDeepLinkConfig: any): UrlSerializer &#123;</span><br><span class="line">  return new UrlSerializer(app, userDeepLinkConfig);</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>
<p>因此在项目中可以通过<code>UrlSerializer</code>的依赖注入拿到<code>@IonicPage()</code>中设置的内容。  </p>
<p>总结：<br><code>@IonicPage</code>：Ionic编译时期的一个<strong>标志</strong>，其在运行时无任何作用<br><code>UrlSerializer</code>：保存了有所有页面缩影信息(即<code>NavLink</code>)的列表的全局变量  </p>
<h2 id="由当前页面信息拼接出url"><a href="#由当前页面信息拼接出url" class="headerlink" title="由当前页面信息拼接出url"></a>由当前页面信息拼接出url</h2><p><em>断点入口文件：<code>node_modules/ionic-angular/navigation/deep-linker.js</code><br>断点入口方法：<code>DeepLinker.prototype.navChange</code></em></p>
<p><strong>示例：</strong><br>将<code>APage</code>设置为<code>Nav</code>的<code>root</code>  </p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ion-nav [root]=&quot;&apos;APage&apos;&quot; [rootParams]=&quot;&#123;&apos;a-params&apos;:&apos;paramsForA&apos;&#125;&quot;&gt;&lt;/ion-nav&gt;</span><br></pre></td></tr></table></figure></div>
<p>在组件初始化完毕之后会： </p>
<ol>
<li><p><strong>拿到当前App的所有的root导航容器（调用过<code>app.registerRootNav()</code>）方法</strong>  </p>
<p> 当前示例中只存在一个<code>id: &quot;n4&quot;</code>的<code>Nav</code>的root导航容器  </p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	id:&quot;n4&quot;,</span><br><span class="line">	type:&quot;nav&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<ol start="2">
<li><p><strong>由导航的根节点往子节点依次遍历，拿到导航容器(<code>Nav</code>、<code>Tab</code>)中的当前激活的<code>ViewController</code>，并将其与对应的导航容器、页面数据组合起来</strong>  </p>
<p> 当前示例中<code>Nav</code>激活的页面<code>ViewController</code>为</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component:ƒ APage(navCtrl, navParams),</span><br><span class="line">	name: &quot;APage&quot;,</span><br><span class="line">	data: &#123;a-params: &quot;paramsForA&quot;&#125;,</span><br><span class="line">	id: &quot;a/paramsForA&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<ol start="3">
<li><p><strong>将组合起来的数据结合所有页面的缩影（即<code>NavLink</code>数组）找到对应的具体的某个页面的缩影（<code>NavLink</code>），并将其对应数据完善（结合了各方面数据的<code>NavLink</code>）</strong>   </p>
<p> 当前示例对应的NavLink:</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: ƒ APage(navCtrl, navParams)</span><br><span class="line">	dataKeys: &#123;a-params: true&#125;</span><br><span class="line">	dataLen: 1</span><br><span class="line">	defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">	loadChildren: &quot;../pages/a/a.module#APageModule&quot;</span><br><span class="line">	name: &quot;APage&quot;</span><br><span class="line">	priority: &quot;low&quot;</span><br><span class="line">	segment: &quot;a/:a-params&quot;</span><br><span class="line">	segmentParts: (2) [&quot;a&quot;, &quot;:a-params&quot;]</span><br><span class="line">	segmentPartsLen: 2</span><br><span class="line">	staticLen: 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>将导航容器、页面数据以及找到的完善信息的<code>NavLink</code>得到一个<code>NavSegment</code>的对象的列表（若存在<code>Nav</code>、<code>Tabs</code>、<code>Tab</code>的相互嵌套则可能存在多个<code>NavSegment</code>）</strong>   </p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">export interface NavSegment extends DehydratedSegment &#123;</span><br><span class="line">  type: string;								//对应的导航容器类型</span><br><span class="line">  navId: string;							//对应导航容器的navId</span><br><span class="line">  secondaryId: string;						//tabs的secondaryId</span><br><span class="line">  requiresExplicitNavPrefix?: boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export interface DehydratedSegment &#123;</span><br><span class="line">  id: string;							//导航容器的id</span><br><span class="line">  name: string;							//页面的名称</span><br><span class="line">  component?: any;						//页面的组件</span><br><span class="line">  loadChildren?: string;				//页面组件加载的url</span><br><span class="line">  data: any;							//页面数据</span><br><span class="line">  defaultHistory?: NavSegment[];		//默认的历史页面</span><br><span class="line">  secondaryId?: string;					//tabs的secondaryId</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<pre><code>当前示例对应的`NavSegment`对象  

<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	component: ƒ APage(navCtrl, navParams)</span><br><span class="line">	data: &#123;a-params: &quot;paramsForA&quot;&#125;</span><br><span class="line">	defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">	id: &quot;a/paramsForA&quot;</span><br><span class="line">	loadChildren: &quot;../pages/a/a.module#APageModule&quot;</span><br><span class="line">	name: &quot;APage&quot;</span><br><span class="line">	navId: &quot;n4&quot;</span><br><span class="line">	requiresExplicitNavPrefix: false</span><br><span class="line">	secondaryId: null</span><br><span class="line">	type: &quot;nav&quot;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></div>
</code></pre><ol start="5">
<li><p><strong>将<code>NavSegment</code>列表的信息组合拼接成对应的<code>url</code></strong>  </p>
<p> 当前的示例变化后的url为：<code>http://localhost:8100/#/a/paramsForA</code></p>
</li>
<li><strong>将url写入到历史栈中并利用Angular的<code>Location</code>更新url</strong></li>
</ol>
<h2 id="由url解析出来对应的页面组件"><a href="#由url解析出来对应的页面组件" class="headerlink" title="由url解析出来对应的页面组件"></a>由url解析出来对应的页面组件</h2><p><em>断点入口文件：<code>node_modules/ionic-angular/navigation/deep-linker.js</code><br>断点入口方法：<code>DeepLinker.prototype._urlChange</code></em></p>
<p>示例url：<code>http://localhost:8100/#/a/paramsForA/#/b?a=name</code></p>
<ol>
<li><p><strong>将url规整化（确保以“/”开头并且结尾处无“/”，并去掉多余的“#”、“?”的数据）</strong>  </p>
<p> 当前示例对应规整化的url：<code>/a/paramsForA</code></p>
</li>
<li><p><strong>若url中存在“nav”、“tabs”的片段，则可能具有嵌套的导航容器，需要将其分组处理</strong>  </p>
<p> 当前示例无导航容器嵌套，因此只有一组url分组</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&quot;a/paramsForA&quot;]</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<ol start="3">
<li><p><strong>将前面分组之后的数据进行处理，若是“nav”、“tabs”则这部分可能带有导航容器，暂且将其的类型设置为<code>nav</code>或<code>tabs</code>，讲分组内的其他片段转换到<code>segmentPieces</code>上</strong></p>
<p> 当前示例对应的<code>NavGroups</code></p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	navId: null</span><br><span class="line">	niceId: null</span><br><span class="line">	secondaryId: null</span><br><span class="line">	segmentPieces: (2) [&quot;a&quot;, &quot;paramsForA&quot;]</span><br><span class="line">	type: null</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></div>
<p> 若url为<code>http://localhost:8100/#/tabs/a/b/nav/c/d</code><br> 则<code>NavGroups</code>为</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">	navId: &quot;a&quot;</span><br><span class="line">	niceId: &quot;a&quot;</span><br><span class="line">	secondaryId: &quot;b&quot;</span><br><span class="line">	segmentPieces: []</span><br><span class="line">	type: &quot;tabs&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">	navId: &quot;c&quot;</span><br><span class="line">	niceId: &quot;c&quot;</span><br><span class="line">	secondaryId: null</span><br><span class="line">	segmentPieces: [&quot;d&quot;]</span><br><span class="line">	type: &quot;nav&quot;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong><code>urlSection</code>由后往前，一个、两个、多个的反向与 在<code>links</code>中匹配查找<code>name</code>与<code>segmentParts</code>的各段参数都能匹配上的，（url中可能带有参数的部分：<code>segmentParts</code>，例如例子的<code>paramsForA</code>,并不仅仅只是名称）</strong>  </p>
<p> 当前示例中<code>segmentPieces</code>能与下面的<code>NavLink</code>完全匹配</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: ƒ APage(navCtrl, navParams)</span><br><span class="line">	dataKeys: &#123;a-params: true&#125;</span><br><span class="line">	dataLen: 1</span><br><span class="line">	defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">	loadChildren: &quot;../pages/a/a.module#APageModule&quot;</span><br><span class="line">	name: &quot;APage&quot;</span><br><span class="line">	priority: &quot;low&quot;</span><br><span class="line">	segment: &quot;a/:a-params&quot;</span><br><span class="line">	segmentParts: (2) [&quot;a&quot;, &quot;:a-params&quot;]</span><br><span class="line">	segmentPartsLen: 2</span><br><span class="line">	staticLen: 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<pre><code>到到一个初步的`NavSegment`  

<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: ƒ APage(navCtrl, navParams)</span><br><span class="line">	data: &#123;a-params: &quot;paramsForA&quot;&#125;</span><br><span class="line">	defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">	id: &quot;a/paramsForA&quot;</span><br><span class="line">	loadChildren: &quot;../pages/a/a.module#APageModule&quot;</span><br><span class="line">	name: &quot;APage&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</code></pre><ol start="5">
<li><p><strong>如果在这段中完全没有被匹配到的<code>NavLink</code>，那么这个没被匹配到的<code>segment</code>暂时将这些<code>segment</code>的最后一个设置为某个tabs的<code>secondaryId</code></strong><br> 当前示例，无多余的<code>segment</code><br> 我们可以将url改为<code>http://localhost:8100/#/ZZZ</code><br> 将会得到如下<code>NavSegment</code></p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: null</span><br><span class="line">	data: null</span><br><span class="line">	defaultHistory: null</span><br><span class="line">	id: null</span><br><span class="line">	loadChildren: null</span><br><span class="line">	name: null</span><br><span class="line">	secondaryId: &quot;ZZZ&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><strong>通过<code>这个NavSegment</code>信息，以及当前app已被初始化的信息，能够得到一个信息更完善的<code>NavSegment</code></strong><br> 当前示例对应的<code>NavSegment</code>:</p>
 <div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: ƒ APage(navCtrl, navParams)</span><br><span class="line">	data: &#123;a-params: &quot;paramsForA&quot;&#125;</span><br><span class="line">	defaultHistory: [&quot;BPage&quot;]</span><br><span class="line">	id: &quot;a/paramsForA&quot;</span><br><span class="line">	loadChildren: &quot;../pages/a/a.module#APageModule&quot;</span><br><span class="line">	name: &quot;APage&quot;</span><br><span class="line">	navId: &quot;n4&quot;</span><br><span class="line">	secondaryId: undefined</span><br><span class="line">	type: &quot;nav&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
<pre><code>我们可以将url改为`http://localhost:8100/#/ZZZ`  

<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	component: null</span><br><span class="line">	data: null</span><br><span class="line">	defaultHistory: null</span><br><span class="line">	id: null</span><br><span class="line">	loadChildren: null</span><br><span class="line">	name: null</span><br><span class="line">	navId: &quot;n4&quot;</span><br><span class="line">	secondaryId: &quot;ZZZ&quot;</span><br><span class="line">	type: &quot;nav&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</code></pre><ol start="7">
<li><p><strong>根据<code>NavSegment</code>的信息，找到对应的导航的容器，并将对应的页面置为对应<code>componet</code></strong>  </p>
<p> 当前示例会正确呈现出<code>APage</code><br> 若将url改为<code>http://localhost:8100/#/ZZZ</code><br> 则因为无法找到对应的<code>component</code>，因此无法完成跳转  </p>
</li>
</ol>

      
    </div>
    
  </div>
  
  
</article>

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/avatar1.jpeg" title="图片来自网络">
    <h3 class="avatar-name">
      
        如歌如羽
      
    </h3>
    <p class="avatar-slogan">
      移动前端开发工程师、Android开发工程师、IOS开发工程师、全栈开发工程师
    </p>
  </div>
</div>


  
    
<div class="widget-box">
  <h3 class="widget-title">分类</h3>
  <div class="widget">
    <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Web后端/">Web后端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web后端/Nodejs/">Nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web后端/php/">php</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/">移动前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/Hybrid/">Hybrid</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/IOS/">IOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/bug记录/">bug记录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/其他/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动前端/技巧/">技巧</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/自动化/">自动化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/自动化/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/自动化/shell/">shell</a></li></ul></li></ul>
  </div>
</div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <a class="tag-link" href="/tags/bug记录/">bug记录</a>，  <a class="tag-link" href="/tags/express/">express</a>，  <a class="tag-link" href="/tags/gcd/">gcd</a>，  <a class="tag-link" href="/tags/hybrid/">hybrid</a>，  <a class="tag-link" href="/tags/ionic/">ionic</a>，  <a class="tag-link" href="/tags/ios/">ios</a>，  <a class="tag-link" href="/tags/javascript/">javascript</a>，  <a class="tag-link" href="/tags/nodejs/">nodejs</a>，  <a class="tag-link" href="/tags/php/">php</a>，  <a class="tag-link" href="/tags/shell/">shell</a>，  <a class="tag-link" href="/tags/ssh/">ssh</a>，  <a class="tag-link" href="/tags/vim/">vim</a>，  <a class="tag-link" href="/tags/wechat/">wechat</a>，  <a class="tag-link" href="/tags/其他/">其他</a>，  <a class="tag-link" href="/tags/原理/">原理</a>，  <a class="tag-link" href="/tags/原理理解/">原理理解</a>，  <a class="tag-link" href="/tags/技巧/">技巧</a>，  <a class="tag-link" href="/tags/源码剖析/">源码剖析</a>，  <a class="tag-link" href="/tags/环境搭建/">环境搭建</a>
    </div>
  </div>


  
    
  <div class="widget-box">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/bug记录/" style="font-size: 10px;">bug记录</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/gcd/" style="font-size: 10px;">gcd</a> <a href="/tags/hybrid/" style="font-size: 20px;">hybrid</a> <a href="/tags/ionic/" style="font-size: 18.57px;">ionic</a> <a href="/tags/ios/" style="font-size: 11.43px;">ios</a> <a href="/tags/javascript/" style="font-size: 11.43px;">javascript</a> <a href="/tags/nodejs/" style="font-size: 11.43px;">nodejs</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/shell/" style="font-size: 11.43px;">shell</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/wechat/" style="font-size: 10px;">wechat</a> <a href="/tags/其他/" style="font-size: 11.43px;">其他</a> <a href="/tags/原理/" style="font-size: 15.71px;">原理</a> <a href="/tags/原理理解/" style="font-size: 14.29px;">原理理解</a> <a href="/tags/技巧/" style="font-size: 12.86px;">技巧</a> <a href="/tags/源码剖析/" style="font-size: 17.14px;">源码剖析</a> <a href="/tags/环境搭建/" style="font-size: 10px;">环境搭建</a>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">2019年04月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">2019年01月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">2018年12月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">2018年11月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">2018年10月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">2018年08月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">2018年07月</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/17/2019-04-17-ssh相关命令/">ssh相关命令</a>
          </li>
        
          <li>
            <a href="/2019/04/16/2019-04-16-livereload插件时未导入cordova.js文件错误的解决方式/">livereload插件时未导入cordova .js文件错误的解决方式</a>
          </li>
        
          <li>
            <a href="/2019/04/16/2019-04-16-将下载的乱码txt文件转换为utf-8格式/">将下载的乱码txt文件转换为utf-8格式</a>
          </li>
        
          <li>
            <a href="/2019/04/16/2019-04-16-JavaScript 将数组拆分为不定参数列表/">javascript 将数组拆分为不定参数列表</a>
          </li>
        
          <li>
            <a href="/2019/04/16/2019-04-16-252个英语字根、词根/">252个英语字根、词根</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2019 Shadow如寒灬 &nbsp;&nbsp;
    驱动于 <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <span id="busuanzi_container_site_pv">欢迎来访</span>
  </div>
</footer>
      <script src="/js/jquery-2.0.3.min.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/nodejs/wechat/ranking-list" class="mobile-nav-link">游戏高分榜</a>
  
    <a href="/phpmyadmin" class="mobile-nav-link">数据库</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>